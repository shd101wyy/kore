<!DOCTYPE html>
<html lang="en">
  <head>
<meta charset="utf-8" />
<meta
  name="viewport"
  content="width=device-width, initial-scale=1.0, maximum-scale=1.0"
/>
<meta
  name="description"
  content="The symbolic execution engine powering the K Framework"
/>
<meta name="keywords" content="runtime, verification, rv, k, kore" />
<meta
  name="author"
  content="Kore | Runtime Verification Inc"
/>
<meta name="robots" content="index, follow" />

<!--favicon icon-->
<!-- <link rel="icon" type="image/png" href="../../assets/img/favicon.ico" /> -->

<title>Kore | Runtime Verification Inc</title>

<!-- <base href="/k/" /> -->

<!--web fonts-->
<link
  href="https://fonts.googleapis.com/css?family=Nunito:300,400,600,700,800"
  rel="stylesheet"
/>
<link
  href="https://fonts.googleapis.com/css?family=Lora:400i"
  rel="stylesheet"
/>

<link
  href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/css/all.min.css"
  rel="stylesheet"
/>

<link href="../../assets/css/index.css" rel="stylesheet" />

<!--[if (gt IE 9) |!(IE)]><!-->
<!--<link rel="stylesheet" href="/assets/vendor/custom-nav/css/effects/fade-menu.css"/>-->
<!-- <link rel="stylesheet" href="../../assets/k/vl-nav/css/effects/slide-menu.css" /> -->
<!--<![endif]-->

  </head>

  <body>
<header
  class="navbar navbar-expand navbar-dark flex-column flex-md-row bd-navbar"
>
  <a class="logo-link" href="../../index.html">
    Kore
  </a>
  <ul class="navbar-nav ml-md-auto">
    <li class="nav-item">
      <a
        class="nav-link pl-2 pr-1 mx-1 py-3 my-n2"
        href="https://github.com/runtimeverification/algorand-sc-semantics"
        target="_blank"
        rel="noopener"
        aria-label="GitHub"
      >
        <i class="fab fa-github"></i>
      </a>
    </li>
  </ul>
  <!--
  <a
    class="btn btn-rv-blue d-none d-lg-inline-block mb-3 mb-md-0 ml-md-3"
    href="../../downloads"
    >Download</a
  >
  -->
</header>


    <div class="container-fluid">
      <div class="row flex-xl-nowrap">
<div class="col-12 col-md-3 col-xl-2 bd-sidebar mb-3">
  <form
    role="search"
    class="bd-search d-flex align-items-center justify-content-between"
  >
    <input
      type="search"
      class="form-control"
      placeholder="Search..."
      aria-label="Search for..."
      autocomplete="false"
      id="search-box"
    />
    <button
      class="btn bd-search-docs-toggle d-md-none p-0 ml-3 collapsed"
      type="button"
      aria-label="Toggle docs navigation"
      style="font-size: 1.4rem"
    >
      <i class="fas fa-bars"></i>
    </button>
  </form>
  <nav class="collapse bd-links" aria-label="Main navigation">
    <div class="bd-toc-item">
      <a class="bd-toc-link" href="../../">Homepage</a>
      <a class="bd-toc-link" href="../../docs/manual/DEVELOPER_MANUAL">Developer Manual</a>
    </div>
  </nav>
</div>

        <main
          class="col-12 col-md-6 col-xl-8 py-md-3 pl-md-5 bd-content"
          role="main"
        >
          <div class="markdown-preview"><html><head></head><body><h1 id="one-path-reachability-implemented-only-for-deterministic-semantics">One-Path Reachability implemented only for deterministic semantics</h1>
<h2 id="background">Background</h2>
<p>Proving an one-path reachability formula <code>&#x2200;X.&#x3C6; &#x2192; &#x25C7;w &#x2203;Y.&#x3C8;</code> means proving that,
for <em>all</em> interpretations <code>&#x3C1;</code> for the variables in <code>X</code>, and all configurations
<code>&#x3B3;</code> which are matched by <code>&#x3C6;</code> under the interpretation <code>&#x3C1;</code>, there <em>exists</em>
a path from <code>&#x3B3;</code> to a configuration <code>&#x3B3;&apos;</code> and an interpretation <code>&#x3C1;&apos;</code> extending
<code>&#x3C1;</code> with values for the variables in <code>Y</code> such that <code>&#x3B3;&apos;</code> is matched by <code>&#x3C8;</code>
under the interpretation <code>&#x3C1;&apos;</code>.</p>
<p>This is implemented as symbolically executing the configuration <code>&#x3C6;</code>,
potentially coinductively using the formula itself as a rule, while
checking (at each step) whether a configuration matching <code>&#x3C8;</code> has been reached.</p>
<h2 id="the-problem">The problem</h2>
<p>While all-path reachability requires one to find a configuration matching <code>&#x3C8;</code>
on <em>all</em> paths and for <em>all</em> instances of <code>&#x3C6;</code>, one-path reachability requires
finding a configuration matching <code>&#x3C8;</code> on just <em>one</em> path, but still for <em>all</em>
instances of <code>&#x3C6;</code>.  This requires a double effort when exploring the space
of the symbolic execution because we have a disjunction (just one path is
required) of conjunctions (all instances of <code>&#x3C6;</code> need to be accounted for).</p>
<h2 id="decision">Decision</h2>
<p>To maintain soundness while avoiding implementation complexity, we will assume
that the definition is (strongly) deterministic, i.e., there are no concurrent
transitions from the same state to different ones.</p>
<p>The one-path algorithm applies rewrite rules to the goals using the <code>deriveSeq</code>
procedure, which was not designed to consider rule applications where two or
more rules have the same left hand side (as in the case of non-deterministic semantics).
These characteristics of the implementation entail that the one-path algorithm,
while sound, doesn&apos;t guarantee full state space coverage.</p>
<p>This is in accord with the original definition of one-path reachability which
only guaranteed (relative) completeness for (strongly) deterministic
definitions, and with the fact that for non-deterministic definitions,
all-path reachability already provides a (relative) complete verification
procedure.</p>
<h3 id="consequences">Consequences</h3>
<p>Although still sound for non-deterministic definitions, this decision might
lead to claims not being proved because the semantics has chosen the wrong path
(and would not explore the other paths).</p>
<h4 id="example-1">Example 1</h4>
<p>Given the following definition:</p>
<pre class="language-text"><code>module PATH
  import DOMAINS
  syntax S ::= &quot;a&quot; | &quot;b&quot; | &quot;c&quot;

  rule a =&gt; b
  rule a =&gt; c
endmodule
</code></pre>
<p>proving the one-path reachability claim <code>a =&gt; c</code> might be not possible,
if the prover selects to advance the execution using the other rule.</p>
<h4 id="example-2">Example 2</h4>
<p>Given the following definition:</p>
<pre class="language-text"><code>module PATH
  import DOMAINS
  syntax S ::= &quot;a&quot; | &quot;b&quot; | &quot;c&quot; 
  syntax Cmd ::= &quot;select&quot;

  configuration &lt;k&gt; .K &lt;/k&gt; &lt;state&gt; .Set &lt;/state&gt;

  rule &lt;k&gt; select =&gt; X ...&lt;/k&gt; &lt;state&gt;... SetItem(X:S) ...&lt;/state&gt;
endmodule
</code></pre>
<p>the one-path reachability claim</p>
<pre class="language-text"><code>&lt;k&gt; select =&gt; ?X &lt;/k&gt; &lt;state&gt; SetItem(a) SetItem(b) SetItem(c) &lt;/state&gt;
    ensures ?X ==K b orBool ?X ==K c 
</code></pre>
<p>might not be provable because the prover selects to advance the execution
using the <code>X=a</code> instance for the <code>select</code> rule.</p>
<h2 id="options">Options</h2>
<p>We could devise an algorithm to perform a more exhaustive exploration of the
search-space.</p>
<p>We will just sketch it below on an example.</p>
<p>Consider the following specification</p>
<pre class="language-text"><code>module TEST
  imports BOOL
  syntax S ::= &quot;b&quot; | &quot;c&quot; | &quot;d&quot; | &quot;e&quot;
             | test(Bool)
  
  test(true) =&gt; b   // first rule
  test(true) =&gt; c   // 2nd rule
  test(false) =&gt; d  // 3rd rule
  test(false) =&gt; e  // 4th rule
endmodule
</code></pre>
<p>together with the claim <code>test(X) =&gt; c \/ e</code>.</p>
<p>The idea would be to derive the goal in parallel with each of the rules,
but to associate a remainder to each particular derivation,
then we will require that the derived goal and the remainder need to be
satisfied simultaneously, but that any of thus obtained
derived goal - remainder pairs is sufficient to prove our original goal.</p>
<p>Thus, we would replace <code>test(X) =&gt; c \/ e</code> by the derivation</p>
<pre class="language-text"><code>(
  b =&gt; c \/ e                     -- derivation using 1st rule
  /\
  test(X) /\ x &lt;&gt; true =&gt; c \/ e  -- remainder after applying 1st rule
)
\/
(
  c =&gt; c \/ e                     -- derivation using 2nd rule
  /\
  test(X) /\ x &lt;&gt; true =&gt; c \/ e  -- remainder after applying 2nd rule
)
\/
(
  d =&gt; c \/ e                     -- derivation using 3rd rule
  /\
  test(X) /\ x &lt;&gt; false =&gt; c \/ e -- remainder after applying 3rd rule
)
\/
(
  e =&gt; c \/ e                     -- derivation using 4th rule
  /\
  test(X) /\ x &lt;&gt; false =&gt; c \/ e -- remainder after applying 4th rule
)
</code></pre>
<p>then we can choose any goal in the or-and tree and expand it, and continue to do
so until all goals are stuck or one of the global disjuncts is completely proven.</p>
<p>For example, assuming a leftmost, innermost strategy, we could continue
by first checking <code>b =&gt; c \/ e</code> and declaring it stuck, meaning that we
can skip its remainder altogether, then moving to <code>c =&gt; c \/ e</code> which
holds without further expansion, so it can be eliminated, leading us to
its remainder <code>test(X) /\ x &lt;&gt; true =&gt; c \/ e</code>.</p>
<p>Following the algorithm, this can be expanded to</p>
<pre class="language-text"><code>(
  d =&gt; c \/ e
  /\
  test(X) /\ x &lt;&gt; true /\ x &lt;&gt; false =&gt; c \/ e
)
\/
(
  e =&gt; c \/ e
  /\
  test(X) /\ x &lt;&gt; true /\ x &lt;&gt; false =&gt; c \/ e
)
</code></pre>
<p>Again, <code>d =&gt; c \/ e</code> is stuck, so we can skip to
<code>e =&gt; c \/ e</code>, which holds immediately, so it can be eliminated.
Its remainder, too, can be eliminated, as
<code> x &lt;&gt; true /\ x &lt;&gt; false</code> is equivalent to <code>&#x22A5;</code>.</p>
<p>This concludes the proof, as we have found witnesses of reaching the
destination for all instances of the input.</p>
<h3 id="note">Note</h3>
<p>When deriving goals, care should be taken about the same rule unifing in
multiple ways with the same configuration, as in the <a href="#example_2">Example 2</a>
above. In such cases, each of the unification instances should be considered
as a separate rule instance when doing the parallel derivation, and thus a
separate remainder should be computed for each.</p>
</body></html></div>
        </main>

        <!-- Page ToC -->
        <div class="col-12 col-md-3 col-xl-2 py-md-3 bd-sidebar page-toc mb-3">
          
<div>
<details style="padding:0.25rem 0;;padding-left: 0px;" open>
            <summary class="bd-toc-link-wrapper">
              <a href="#one-path-reachability-implemented-only-for-deterministic-semantics" class="bd-toc-link">One-Path Reachability implemented only for deterministic semantics</a>
              </summary>
            <div>
              <div class="bd-toc-link-wrapper" style="padding:0.25rem 0;">
              <a
                href="#background"
                class="bd-toc-link"
                style="padding-left: 8px;;"
              >
                Background
              </a></div><div class="bd-toc-link-wrapper" style="padding:0.25rem 0;">
              <a
                href="#the-problem"
                class="bd-toc-link"
                style="padding-left: 8px;;"
              >
                The problem
              </a></div><details style="padding:0.25rem 0;;padding-left: 8px;" open>
            <summary class="bd-toc-link-wrapper">
              <a href="#decision" class="bd-toc-link">Decision</a>
              </summary>
            <div>
              <details style="padding:0.25rem 0;;padding-left: 16px;" open>
            <summary class="bd-toc-link-wrapper">
              <a href="#consequences" class="bd-toc-link">Consequences</a>
              </summary>
            <div>
              <div class="bd-toc-link-wrapper" style="padding:0.25rem 0;">
              <a
                href="#example-1"
                class="bd-toc-link"
                style="padding-left: 24px;;"
              >
                Example 1
              </a></div><div class="bd-toc-link-wrapper" style="padding:0.25rem 0;">
              <a
                href="#example-2"
                class="bd-toc-link"
                style="padding-left: 24px;;"
              >
                Example 2
              </a></div>
            </div>
          </details>
        
            </div>
          </details>
        <details style="padding:0.25rem 0;;padding-left: 8px;" open>
            <summary class="bd-toc-link-wrapper">
              <a href="#options" class="bd-toc-link">Options</a>
              </summary>
            <div>
              <div class="bd-toc-link-wrapper" style="padding:0.25rem 0;">
              <a
                href="#note"
                class="bd-toc-link"
                style="padding-left: 16px;;"
              >
                Note
              </a></div>
            </div>
          </details>
        
            </div>
          </details>
        
</div>

        </div>
        <div class="btn btn-rv-blue page-toc-toggle-btn"></div>
        <!-- End Page ToC -->
      </div>
    </div>
<!-- The footer is now controlled by the k-web-theme git submodule -->
<footer id="rvsite-footer" class="app-footer text-md-left text-center">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-md-4 mb-md-0 mb-4">
        <a href="https://runtimeverification.com/" target="_blank">
          <picture>
            <source
              srcset="
                https://runtimeverification.com/assets/img/rv-logo-dark.png
              "
              media="(prefers-color-scheme: dark)"
            />
            <img
              class="logo-dark"
              src="https://runtimeverification.com/assets/img/rv-logo.png"
              alt="Runtime Verification logo"
              style="height: 32px"
            /> </picture
        ></a>
        <p class="mt-2 text-md-left copyright">
          <a href="https://goo.gl/maps/NYzr2iKpXMgEmQ2F6" target="_blank"
            >102 E Main St #500, Urbana, IL 61801</a
          >
        </p>
      </div>
      <div class="col-md-4 text-md-center mb-md-0 mb-4"></div>
      <div class="col-md-4 mb-md-0 mb-4 text-md-right">
        <p class="copyright">2021 Â© all rights reserved</p>
      </div>
    </div>
  </div>
</footer>

    <script src="../../assets/js/index.js"></script>
  </body>
</html>
