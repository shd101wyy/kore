<!DOCTYPE html>
<html lang="en">
  <head>
<meta charset="utf-8" />
<meta
  name="viewport"
  content="width=device-width, initial-scale=1.0, maximum-scale=1.0"
/>
<meta
  name="description"
  content="The symbolic execution engine powering the K Framework"
/>
<meta name="keywords" content="runtime, verification, rv, k, kore" />
<meta
  name="author"
  content="Kore | Runtime Verification Inc"
/>
<meta name="robots" content="index, follow" />

<!--favicon icon-->
<!-- <link rel="icon" type="image/png" href="../../assets/img/favicon.ico" /> -->

<title>Kore | Runtime Verification Inc</title>

<!-- <base href="/k/" /> -->

<!--web fonts-->
<link
  href="https://fonts.googleapis.com/css?family=Nunito:300,400,600,700,800"
  rel="stylesheet"
/>
<link
  href="https://fonts.googleapis.com/css?family=Lora:400i"
  rel="stylesheet"
/>

<link
  href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/css/all.min.css"
  rel="stylesheet"
/>

<link href="../../assets/css/index.css" rel="stylesheet" />

<!--[if (gt IE 9) |!(IE)]><!-->
<!--<link rel="stylesheet" href="/assets/vendor/custom-nav/css/effects/fade-menu.css"/>-->
<!-- <link rel="stylesheet" href="../../assets/k/vl-nav/css/effects/slide-menu.css" /> -->
<!--<![endif]-->

  </head>

  <body>
<header
  class="navbar navbar-expand navbar-dark flex-column flex-md-row bd-navbar"
>
  <a class="logo-link" href="../../index.html">
    Kore
  </a>
  <ul class="navbar-nav ml-md-auto">
    <li class="nav-item">
      <a
        class="nav-link pl-2 pr-1 mx-1 py-3 my-n2"
        href="https://github.com/runtimeverification/algorand-sc-semantics"
        target="_blank"
        rel="noopener"
        aria-label="GitHub"
      >
        <i class="fab fa-github"></i>
      </a>
    </li>
  </ul>
  <!--
  <a
    class="btn btn-rv-blue d-none d-lg-inline-block mb-3 mb-md-0 ml-md-3"
    href="../../downloads"
    >Download</a
  >
  -->
</header>


    <div class="container-fluid">
      <div class="row flex-xl-nowrap">
<div class="col-12 col-md-3 col-xl-2 bd-sidebar mb-3">
  <form
    role="search"
    class="bd-search d-flex align-items-center justify-content-between"
  >
    <input
      type="search"
      class="form-control"
      placeholder="Search..."
      aria-label="Search for..."
      autocomplete="false"
      id="search-box"
    />
    <button
      class="btn bd-search-docs-toggle d-md-none p-0 ml-3 collapsed"
      type="button"
      aria-label="Toggle docs navigation"
      style="font-size: 1.4rem"
    >
      <i class="fas fa-bars"></i>
    </button>
  </form>
  <nav class="collapse bd-links" aria-label="Main navigation">
    <div class="bd-toc-item">
      <a class="bd-toc-link" href="../../">Homepage</a>
      <a class="bd-toc-link" href="../../docs/manual/DEVELOPER_MANUAL">Developer Manual</a>
    </div>
  </nav>
</div>

        <main
          class="col-12 col-md-6 col-xl-8 py-md-3 pl-md-5 bd-content"
          role="main"
        >
          <div class="markdown-preview"><html><head></head><body><h1 id="function-evaluation-and-simplification">Function evaluation and simplification</h1>
<h2 id="background">Background</h2>
<p>We have two types of axiom for function evaluation: function definition axioms
and simplification axioms. The former, taken together, cover all cases when a
function is defined, and they are expected to always match. The latter are
useful when they can be matched, but they are not essential.
However, currently we are not differentiating between the two axiom types.</p>
<p>Examples:</p>
<p>Function definition:</p>
<pre class="language-text"><code>sgn(x) = 1 if x &gt; 0
sgn(x) = -1 if x &lt; 0
sgn(x) = 0 otherwise
</code></pre>
<p>Function simplification:</p>
<pre class="language-text"><code>((x mod y) + (z mod y)) mod y = (x + z) mod y
</code></pre>
<p>When evaluating a function we match on the expression shape, then, when
that&apos;s different, we resolve everything else as equality constraints, e.g. when
matching the function simplification axiom above with <code>a mod b</code> we would get
<code>(x + z) mod b  and  a = ((x mod y) + (z mod y))</code> as the result.</p>
<p>However, that&apos;s undesirable for simplification axioms.</p>
<p>When simplifying normal functions we may encounter constraints like
<code>concat(elem(x,y),z) = map-domain-value</code>. Note that this uses constructor-like
symbols (<code>concat</code> and <code>elem</code>), unlike the above constraint
(<code>a = ((x mod y) + (z mod y))</code>) which uses normal functions (<code>+</code> and <code>mod</code>).</p>
<p>Also see <code>docs/2018-12-21-Function-Evaluation.md</code>.</p>
<h2 id="problem%2Fquestions">Problem/Questions</h2>
<p>Should we add an attribute differentiating definition axioms from simplification
axioms?</p>
<p>Should we just change the function evaluation code to work with both types of
axioms?</p>
<h2 id="decision%3A-function-definition-attribute">Decision: Function definition attribute</h2>
<p>Long term, we should add a function simplification attribute, since it&apos;s the
safest way to solve the problem.</p>
<p>Note that it may make more sense to add a function definition attributes since,
in principle, definition axioms are in <code>O(symbol-count)</code>, while we could have
any number of simplification axioms. However, in practice it would probably
be undesirable to add these attributes to the main semantics (especially
to the existing semantics), so we&apos;ll use simplification attributes.</p>
<h2 id="decision%3A-no-matching-constraints-with-functions-over-axiom-variables">Decision: No matching constraints with functions over axiom variables</h2>
<p>Constraints with normal functions (i.e. not constructors) over axiom variables
are not easily solvable and almost surely do not come from function definition
axioms. Therefore we should not attempt to apply axioms generating these
when matching since the result will probably be more complex than the input
and it does not make sense to apply a simplification axiom in order to get
something more complex.</p>
<p>If we have these, matching should fail, i.e. it should throw an error.</p>
<h2 id="decision%3A-allow-matching-constraints-with-functions-without-axiom-variables">Decision: Allow matching constraints with functions without axiom variables</h2>
<p>If any variables in the result have constructor-like symbols on top of them,
the constraint seems more like a function definition one than like a
simplification one, so we will allow it.</p>
<h2 id="decision%3A-free-pass-for-inputs-made-of-constructor-like-stuff">Decision: Free pass for inputs made of constructor-like stuff</h2>
<p>We will allow matching on axiom patterns made of constructor-like symbols
regardless of how the resulting constraint looks.</p>
<p>Note that this is actually a subcase of
&quot;Allow matching constraints with functions without axiom variables&quot;. However,
in the future we may want to allow only this kind of matching.</p>
</body></html></div>
        </main>

        <!-- Page ToC -->
        <div class="col-12 col-md-3 col-xl-2 py-md-3 bd-sidebar page-toc mb-3">
          
<div>
<details style="padding:0.25rem 0;;padding-left: 0px;" open>
            <summary class="bd-toc-link-wrapper">
              <a href="#function-evaluation-and-simplification" class="bd-toc-link">Function evaluation and simplification</a>
              </summary>
            <div>
              <div class="bd-toc-link-wrapper" style="padding:0.25rem 0;">
              <a
                href="#background"
                class="bd-toc-link"
                style="padding-left: 8px;;"
              >
                Background
              </a></div><div class="bd-toc-link-wrapper" style="padding:0.25rem 0;">
              <a
                href="#problem%2Fquestions"
                class="bd-toc-link"
                style="padding-left: 8px;;"
              >
                Problem/Questions
              </a></div><div class="bd-toc-link-wrapper" style="padding:0.25rem 0;">
              <a
                href="#decision%3A-function-definition-attribute"
                class="bd-toc-link"
                style="padding-left: 8px;;"
              >
                Decision: Function definition attribute
              </a></div><div class="bd-toc-link-wrapper" style="padding:0.25rem 0;">
              <a
                href="#decision%3A-no-matching-constraints-with-functions-over-axiom-variables"
                class="bd-toc-link"
                style="padding-left: 8px;;"
              >
                Decision: No matching constraints with functions over axiom variables
              </a></div><div class="bd-toc-link-wrapper" style="padding:0.25rem 0;">
              <a
                href="#decision%3A-allow-matching-constraints-with-functions-without-axiom-variables"
                class="bd-toc-link"
                style="padding-left: 8px;;"
              >
                Decision: Allow matching constraints with functions without axiom variables
              </a></div><div class="bd-toc-link-wrapper" style="padding:0.25rem 0;">
              <a
                href="#decision%3A-free-pass-for-inputs-made-of-constructor-like-stuff"
                class="bd-toc-link"
                style="padding-left: 8px;;"
              >
                Decision: Free pass for inputs made of constructor-like stuff
              </a></div>
            </div>
          </details>
        
</div>

        </div>
        <div class="btn btn-rv-blue page-toc-toggle-btn"></div>
        <!-- End Page ToC -->
      </div>
    </div>
<!-- The footer is now controlled by the k-web-theme git submodule -->
<footer id="rvsite-footer" class="app-footer text-md-left text-center">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-md-4 mb-md-0 mb-4">
        <a href="https://runtimeverification.com/" target="_blank">
          <picture>
            <source
              srcset="
                https://runtimeverification.com/assets/img/rv-logo-dark.png
              "
              media="(prefers-color-scheme: dark)"
            />
            <img
              class="logo-dark"
              src="https://runtimeverification.com/assets/img/rv-logo.png"
              alt="Runtime Verification logo"
              style="height: 32px"
            /> </picture
        ></a>
        <p class="mt-2 text-md-left copyright">
          <a href="https://goo.gl/maps/NYzr2iKpXMgEmQ2F6" target="_blank"
            >102 E Main St #500, Urbana, IL 61801</a
          >
        </p>
      </div>
      <div class="col-md-4 text-md-center mb-md-0 mb-4"></div>
      <div class="col-md-4 mb-md-0 mb-4 text-md-right">
        <p class="copyright">2021 © all rights reserved</p>
      </div>
    </div>
  </div>
</footer>

    <script src="../../assets/js/index.js"></script>
  </body>
</html>
